FROM centos:7
MAINTAINER sanadshamoon92@gmail.com

# 1. Fix Repos
RUN sed -i 's/mirrorlist/#mirrorlist/g' /etc/yum.repos.d/CentOS-*
RUN sed -i 's|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g' /etc/yum.repos.d/CentOS-*

# 2. Install Packages
RUN yum install -y httpd zip unzip

# 3. Download from Drupal (This URL works!)
#ADD https://ftp.drupal.org/files/projects/photogenic-7.x-1.0.zip /var/www/html/
COPY Website.zip /var/www/html/

WORKDIR /var/www/html/

# 4. Unzip and Configure
#RUN unzip photogenic-7.x-1.0.zip
RUN unzip Website.zip

# FIXED: The folder inside is named 'photogenic', not 'photogenic-7.x-1.0'
# We use a wildcard '*/' just to be 100% safe.
RUN cp -rvf */* .
#RUN rm -rf photogenic photogenic-7.x-1.0.zip


CMD ["/usr/sbin/httpd", "-D", "FOREGROUND"]
EXPOSE 80
