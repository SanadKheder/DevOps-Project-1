FROM centos:7
MAINTAINER sanadshamoon92@gmail.com

# 1. Fix Repos
RUN sed -i 's/mirrorlist/#mirrorlist/g' /etc/yum.repos.d/CentOS-*
RUN sed -i 's|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g' /etc/yum.repos.d/CentOS-*

# 2. Install Packages (Added PHP and MySQL support)
RUN yum install -y httpd zip unzip php php-mysql

# 3. Copy your local project file (Instead of downloading from Drupal)
COPY Website.zip /var/www/html/

WORKDIR /var/www/html/

# 4. Unzip and Configure
RUN unzip Website.zip

# Move files from the "Website" folder to the main html folder
RUN cp -rvf */* .
RUN rm -rf Website Website.zip

# Start Apache (Listens on PORT 80)
CMD ["/usr/sbin/httpd", "-D", "FOREGROUND"]
EXPOSE 80